{"ast":null,"code":"const STAR_COUNT = (window.innerWidth + window.innerHeight) / 8,\n      STAR_SIZE = 3,\n      STAR_MIN_SCALE = 0.2,\n      OVERFLOW_THRESHOLD = 50;\nconst canvas = document.querySelector('canvas'),\n      context = canvas.getContext('2d');\nlet scale = 1,\n    // device pixel ratio\nwidth,\n    height;\nlet stars = [];\nlet pointerX, pointerY;\nlet velocity = {\n  x: 0,\n  y: 0,\n  tx: 0,\n  ty: 0,\n  z: 0.0005\n};\nlet touchInput = false;\ngenerate();\nresize();\nstep();\nwindow.onresize = resize;\ncanvas.onmousemove = onMouseMove;\ncanvas.ontouchmove = onTouchMove;\ncanvas.ontouchend = onMouseLeave;\ndocument.onmouseleave = onMouseLeave;\n\nfunction generate() {\n  for (let i = 0; i < STAR_COUNT; i++) {\n    stars.push({\n      x: 0,\n      y: 0,\n      z: STAR_MIN_SCALE + Math.random() * (1 - STAR_MIN_SCALE)\n    });\n  }\n}\n\nfunction placeStar(star) {\n  star.x = Math.random() * width;\n  star.y = Math.random() * height;\n}\n\nfunction recycleStar(star) {\n  let direction = 'z';\n  let vx = Math.abs(velocity.x),\n      vy = Math.abs(velocity.y);\n\n  if (vx > 1 || vy > 1) {\n    let axis;\n\n    if (vx > vy) {\n      axis = Math.random() < vx / (vx + vy) ? 'h' : 'v';\n    } else {\n      axis = Math.random() < vy / (vx + vy) ? 'v' : 'h';\n    }\n\n    if (axis === 'h') {\n      direction = velocity.x > 0 ? 'l' : 'r';\n    } else {\n      direction = velocity.y > 0 ? 't' : 'b';\n    }\n  }\n\n  star.z = STAR_MIN_SCALE + Math.random() * (1 - STAR_MIN_SCALE);\n\n  if (direction === 'z') {\n    star.z = 0.1;\n    star.x = Math.random() * width;\n    star.y = Math.random() * height;\n  } else if (direction === 'l') {\n    star.x = -OVERFLOW_THRESHOLD;\n    star.y = height * Math.random();\n  } else if (direction === 'r') {\n    star.x = width + OVERFLOW_THRESHOLD;\n    star.y = height * Math.random();\n  } else if (direction === 't') {\n    star.x = width * Math.random();\n    star.y = -OVERFLOW_THRESHOLD;\n  } else if (direction === 'b') {\n    star.x = width * Math.random();\n    star.y = height + OVERFLOW_THRESHOLD;\n  }\n}\n\nfunction resize() {\n  scale = window.devicePixelRatio || 1;\n  width = window.innerWidth * scale;\n  height = window.innerHeight * scale;\n  canvas.width = width;\n  canvas.height = height;\n  stars.forEach(placeStar);\n}\n\nfunction step() {\n  context.clearRect(0, 0, width, height);\n  update();\n  render();\n  requestAnimationFrame(step);\n}\n\nfunction update() {\n  velocity.tx *= 0.96;\n  velocity.ty *= 0.96;\n  velocity.x += (velocity.tx - velocity.x) * 0.8;\n  velocity.y += (velocity.ty - velocity.y) * 0.8;\n  stars.forEach(star => {\n    star.x += velocity.x * star.z;\n    star.y += velocity.y * star.z;\n    star.x += (star.x - width / 2) * velocity.z * star.z;\n    star.y += (star.y - height / 2) * velocity.z * star.z;\n    star.z += velocity.z; // recycle when out of bounds\n\n    if (star.x < -OVERFLOW_THRESHOLD || star.x > width + OVERFLOW_THRESHOLD || star.y < -OVERFLOW_THRESHOLD || star.y > height + OVERFLOW_THRESHOLD) {\n      recycleStar(star);\n    }\n  });\n}\n\nfunction render() {\n  stars.forEach(star => {\n    context.beginPath();\n    context.lineCap = 'round';\n    context.lineWidth = STAR_SIZE * star.z * scale;\n    context.strokeStyle = 'rgba(255,255,255,' + (0.5 + 0.5 * Math.random()) + ')';\n    context.beginPath();\n    context.moveTo(star.x, star.y);\n    var tailX = velocity.x * 2,\n        tailY = velocity.y * 2; // stroke() wont work on an invisible line\n\n    if (Math.abs(tailX) < 0.1) tailX = 0.5;\n    if (Math.abs(tailY) < 0.1) tailY = 0.5;\n    context.lineTo(star.x + tailX, star.y + tailY);\n    context.stroke();\n  });\n}\n\nfunction movePointer(x, y) {\n  if (typeof pointerX === 'number' && typeof pointerY === 'number') {\n    let ox = x - pointerX,\n        oy = y - pointerY;\n    velocity.tx = velocity.tx + ox / 8 * scale * (touchInput ? 1 : -1);\n    velocity.ty = velocity.ty + oy / 8 * scale * (touchInput ? 1 : -1);\n  }\n\n  pointerX = x;\n  pointerY = y;\n}\n\nfunction onMouseMove(event) {\n  touchInput = false;\n  movePointer(event.clientX, event.clientY);\n}\n\nfunction onTouchMove(event) {\n  touchInput = true;\n  movePointer(event.touches[0].clientX, event.touches[0].clientY, true);\n  event.preventDefault();\n}\n\nfunction onMouseLeave() {\n  pointerX = null;\n  pointerY = null;\n}","map":{"version":3,"sources":["/Users/colinelsinga/dev/portfolio-site/my-app/src/stars.js"],"names":["STAR_COUNT","window","innerWidth","innerHeight","STAR_SIZE","STAR_MIN_SCALE","OVERFLOW_THRESHOLD","canvas","document","querySelector","context","getContext","scale","width","height","stars","pointerX","pointerY","velocity","x","y","tx","ty","z","touchInput","generate","resize","step","onresize","onmousemove","onMouseMove","ontouchmove","onTouchMove","ontouchend","onMouseLeave","onmouseleave","i","push","Math","random","placeStar","star","recycleStar","direction","vx","abs","vy","axis","devicePixelRatio","forEach","clearRect","update","render","requestAnimationFrame","beginPath","lineCap","lineWidth","strokeStyle","moveTo","tailX","tailY","lineTo","stroke","movePointer","ox","oy","event","clientX","clientY","touches","preventDefault"],"mappings":"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","sourcesContent":["const STAR_COUNT = ( window.innerWidth + window.innerHeight ) / 8,\n      STAR_SIZE = 3,\n      STAR_MIN_SCALE = 0.2,\n      OVERFLOW_THRESHOLD = 50;\n\nconst canvas = document.querySelector( 'canvas' ),\n      context = canvas.getContext( '2d' );\n\nlet scale = 1, // device pixel ratio\n    width,\n    height;\n\nlet stars = [];\n\nlet pointerX,\n    pointerY;\n\nlet velocity = { x: 0, y: 0, tx: 0, ty: 0, z: 0.0005 };\n\nlet touchInput = false;\n\ngenerate();\nresize();\nstep();\n\nwindow.onresize = resize;\ncanvas.onmousemove = onMouseMove;\ncanvas.ontouchmove = onTouchMove;\ncanvas.ontouchend = onMouseLeave;\ndocument.onmouseleave = onMouseLeave;\n\nfunction generate() {\n\n   for( let i = 0; i < STAR_COUNT; i++ ) {\n    stars.push({\n      x: 0,\n      y: 0,\n      z: STAR_MIN_SCALE + Math.random() * ( 1 - STAR_MIN_SCALE )\n    });\n   }\n\n}\n\nfunction placeStar( star ) {\n\n  star.x = Math.random() * width;\n  star.y = Math.random() * height;\n\n}\n\nfunction recycleStar( star ) {\n\n  let direction = 'z';\n\n  let vx = Math.abs( velocity.x ),\n\t    vy = Math.abs( velocity.y );\n\n  if( vx > 1 || vy > 1 ) {\n    let axis;\n\n    if( vx > vy ) {\n      axis = Math.random() < vx / ( vx + vy ) ? 'h' : 'v';\n    }\n    else {\n      axis = Math.random() < vy / ( vx + vy ) ? 'v' : 'h';\n    }\n\n    if( axis === 'h' ) {\n      direction = velocity.x > 0 ? 'l' : 'r';\n    }\n    else {\n      direction = velocity.y > 0 ? 't' : 'b';\n    }\n  }\n  \n  star.z = STAR_MIN_SCALE + Math.random() * ( 1 - STAR_MIN_SCALE );\n\n  if( direction === 'z' ) {\n    star.z = 0.1;\n    star.x = Math.random() * width;\n    star.y = Math.random() * height;\n  }\n  else if( direction === 'l' ) {\n    star.x = -OVERFLOW_THRESHOLD;\n    star.y = height * Math.random();\n  }\n  else if( direction === 'r' ) {\n    star.x = width + OVERFLOW_THRESHOLD;\n    star.y = height * Math.random();\n  }\n  else if( direction === 't' ) {\n    star.x = width * Math.random();\n    star.y = -OVERFLOW_THRESHOLD;\n  }\n  else if( direction === 'b' ) {\n    star.x = width * Math.random();\n    star.y = height + OVERFLOW_THRESHOLD;\n  }\n\n}\n\nfunction resize() {\n\n  scale = window.devicePixelRatio || 1;\n\n  width = window.innerWidth * scale;\n  height = window.innerHeight * scale;\n\n  canvas.width = width;\n  canvas.height = height;\n\n  stars.forEach( placeStar );\n\n}\n\nfunction step() {\n\n  context.clearRect( 0, 0, width, height );\n\n  update();\n  render();\n\n  requestAnimationFrame( step );\n\n}\n\nfunction update() {\n\n  velocity.tx *= 0.96;\n  velocity.ty *= 0.96;\n\n  velocity.x += ( velocity.tx - velocity.x ) * 0.8;\n  velocity.y += ( velocity.ty - velocity.y ) * 0.8;\n\n  stars.forEach( ( star ) => {\n\n    star.x += velocity.x * star.z;\n    star.y += velocity.y * star.z;\n\n    star.x += ( star.x - width/2 ) * velocity.z * star.z;\n    star.y += ( star.y - height/2 ) * velocity.z * star.z;\n    star.z += velocity.z;\n  \n    // recycle when out of bounds\n    if( star.x < -OVERFLOW_THRESHOLD || star.x > width + OVERFLOW_THRESHOLD || star.y < -OVERFLOW_THRESHOLD || star.y > height + OVERFLOW_THRESHOLD ) {\n      recycleStar( star );\n    }\n\n  } );\n\n}\n\nfunction render() {\n\n  stars.forEach( ( star ) => {\n\n    context.beginPath();\n    context.lineCap = 'round';\n    context.lineWidth = STAR_SIZE * star.z * scale;\n    context.strokeStyle = 'rgba(255,255,255,'+(0.5 + 0.5*Math.random())+')';\n\n    context.beginPath();\n    context.moveTo( star.x, star.y );\n\n    var tailX = velocity.x * 2,\n        tailY = velocity.y * 2;\n\n    // stroke() wont work on an invisible line\n    if( Math.abs( tailX ) < 0.1 ) tailX = 0.5;\n    if( Math.abs( tailY ) < 0.1 ) tailY = 0.5;\n\n    context.lineTo( star.x + tailX, star.y + tailY );\n\n    context.stroke();\n\n  } );\n\n}\n\nfunction movePointer( x, y ) {\n\n  if( typeof pointerX === 'number' && typeof pointerY === 'number' ) {\n\n    let ox = x - pointerX,\n        oy = y - pointerY;\n\n    velocity.tx = velocity.tx + ( ox / 8*scale ) * ( touchInput ? 1 : -1 );\n    velocity.ty = velocity.ty + ( oy / 8*scale ) * ( touchInput ? 1 : -1 );\n\n  }\n\n  pointerX = x;\n  pointerY = y;\n\n}\n\nfunction onMouseMove( event ) {\n\n  touchInput = false;\n\n  movePointer( event.clientX, event.clientY );\n\n}\n\nfunction onTouchMove( event ) {\n\n  touchInput = true;\n\n  movePointer( event.touches[0].clientX, event.touches[0].clientY, true );\n\n  event.preventDefault();\n\n}\n\nfunction onMouseLeave() {\n\n  pointerX = null;\n  pointerY = null;\n\n}\n"]},"metadata":{},"sourceType":"module"}